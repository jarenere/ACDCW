<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">

<html>

<head>

<title>Dreamcast Programming - ICONDATA_VMS</title>

</head>

<body vlink="#6677cc" alink="red" link="#6699cc" text="white" bgcolor="black">
<top>

<img alt="" align="right" src="../dc_mark.gif">

<p><img alt="ICONDATA_VMS" valign="top" src="../../_internal/graphic_text!0/asw4kq4vlpnfxtobd3366p2z0ge0klc$5ox5vthb5rge8eas3jh2qygy77vgguf" style="border: none;" height="43" width="246" /></p>


ICONDATA_VMS is a hidden file that can be stored on a VMS to get a
custom icon for the VMS.  In addition to the monochrome icon displayed
on the VMS screen, you can also have a 16-colour icon for the DC file
manager.
<br clear="right">


<p>

The ICONDATA_VMS file contains a small header, a monochrome 32×32 pixel
icon, and optionally a 16-colour 32×32 pixel icon.  The header contains
a textual description of the file and two 32bit little endian integers:


<table border="0" cellpadding="1" cellspacing="0" bgcolor="#808020">

<tr>

<td>
<table border="0" cellpadding="3" cellspacing="2">

<tr>
<th bgcolor="#404000">Offset</th><th bgcolor="#404000">Size (bytes)</th><th bgcolor="#404000">Datatype</th><th bgcolor="#404000">Contents</th>
</tr>

<tr>

<td bgcolor="#404000">$00</td>

<td bgcolor="#404000">16</td>

<td bgcolor="#404000">Text</td>

<td bgcolor="#404000">Description of file (shown in VMS file menu)</td>

</tr>

<tr>

<td bgcolor="#404000">$10</td>

<td bgcolor="#404000">4</td>

<td bgcolor="#404000">Integer</td>

<td bgcolor="#404000">Offset of monochrome icon</td>

</tr>

<tr>

<td bgcolor="#404000">$14</td>

<td bgcolor="#404000">4</td>

<td bgcolor="#404000">Integer</td>

<td bgcolor="#404000">Offset of colour icon,
or 0 if none</td>

</tr>

</table>
</td>

</tr>

</table>


The offsets are bytes from the beginning of the file.


<p><img alt="Monochrome icon" valign="top" src="../../_internal/graphic_text!0/hlcfhu1cyw2cyj7k6g8xd5wjq7q2w5y$iyhpig84zmufa2lu8mlbje3r64vtwhe" style="border: none;" height="23" width="150" /></p>


The monochrome icon is simply stored as 1024 (32 * 32) consecutive
bits, 1 being black (foreground) and 0 being transparent
(background).  The entire icon data is thus 128 bytes.


<p><img alt="Colour icon" valign="top" src="../../_internal/graphic_text!0/hlcfhu1cyw2cyj7k6g8xd5wjq7q2w5y$2cowo926388l9sy9jujab3kq0bw714n" style="border: none;" height="23" width="93" /></p>


The optional colour icon has the same format as a regular VMS file
icon.  Thus, by placing it at offset $60, it can double as the icon
for the ICONDATA_VMS file itself.  (Not that it really needs an icon,
as it's hidden.)  The icon data starts with 32 bytes palette
information, and following that 512 bytes of pixel data.


<p><img alt="Palette" valign="top" src="../../_internal/graphic_text!0/hf4smn6nuv0cjtktdhr9j3edpqe60qh$nd1nkpgeye39se48dvjv1nxver1mm8" style="border: none;" height="17" width="40" /></p>


The palette consists of 16 16-bit little endian integers, one for each colour
in the palette.  Each integer consists of four four-bit fields:


<table border="0" cellpadding="1" cellspacing="0" bgcolor="#808020">

<tr>

<td>
<table border="0" cellpadding="3" cellspacing="2">

<tr>
<th bgcolor="#404000">15</th><th bgcolor="#404000">14</th><th bgcolor="#404000">13</th><th bgcolor="#404000">12</th><th bgcolor="#404000">11</th><th bgcolor="#404000">10</th><th bgcolor="#404000">9</th><th bgcolor="#404000">8</th><th bgcolor="#404000">7</th><th bgcolor="#404000">6</th><th bgcolor="#404000">5</th><th bgcolor="#404000">4</th><th bgcolor="#404000">3</th><th bgcolor="#404000">2</th><th bgcolor="#404000">1</th><th bgcolor="#404000">0</th>
</tr>

<tr>

<td colspan="4" bgcolor="#404000">Alpha</td>

<td colspan="4" bgcolor="#404000">Red</td>

<td colspan="4" bgcolor="#404000">Green</td>

<td colspan="4" bgcolor="#404000">Blue</td>

</tr>

</table>
</td>

</tr>

</table>


Alpha 15 is fully opaque, alpha 0 is fully transparent.


<p><img alt="Pixel data" valign="top" src="../../_internal/graphic_text!0/hf4smn6nuv0cjtktdhr9j3edpqe60qh$i2u2b2zepn7dnwpc5k6v4qkqcrn9shk" style="border: none;" height="17" width="59" /></p>


The pixel data consists of one nybble per pixel.  Each byte thus
represents two horizontally adjacent pixels, the high nybble being the
left one and the low nybble being the right one.  The entire icon
contains 1024 (32 * 32) nybbles, or 512 bytes.
</p>



<hr>
<a href="http://www.roxen.com/"><img border="0" alt="Powered by Roxen" align="right" src="../../internal-roxen-power-small-white" height="40" width="40" /></a><a href="../index.html">Dreamcast Programming</a> by <i><a href="mailto:marcus@mc.pp.se">Marcus Comstedt</a></i><br>

<!-- Created: Wed Jan  5 16:55:21 MET 2000 -->
<!-- hhmts start -->
Last modified: Mon Mar 27 17:20:05 MEST 2000
<!-- hhmts end -->

</top>
</body>

</html>

